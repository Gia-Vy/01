

@model Dictionary<int, List<Phone_web.Models.Product>>

@{
    ViewBag.Title = "Trang chủ";
    Layout = "~/Views/Shared/_LayoutCustomer.cshtml";
}
@*<style>
    .banner {
        position: relative;
        width: 100%;
        height: 350px; /* chỉnh tuỳ ý */
        overflow: hidden; /* CHẶN KHÔNG CHO CHẠY RA NGOÀI */
        border-radius: 15px; /* tuỳ chọn */
    }

    .slides {
        position: relative;
        width: 100%;
        height: 100%;
    }

        .slides img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

            .slides img.active {
                opacity: 1;
            }

    /* Nút qua lại */
    .prev, .next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0,0,0,0.4);
        color: white;
        border: none;
        padding: 10px 14px;
        cursor: pointer;
        z-index: 5;
    }

    .prev {
        left: 10px;
    }

    .next {
        right: 10px;
    }

</style>*@
@*<div class="banner">
    <div class="slides">

        <img src="~/hinh/max13.jpg" class="active" />
        <img src="~/hinh/max1.jpg" />
        <img src="~/hinh/17.2.jpg" />
        <img src="~/hinh/17plus.3.jpg" />
        <img src="~/hinh/17plus.77.jpg" />
        <img src="~/hinh/imac1.jpg" />

    </div>
    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>
</div>*@

@foreach (var group in Model)
{
    var categoryName = group.Value.FirstOrDefault()?.Category?.CatName ?? "Danh mục";
    var categoryLink = Url.Action("Category", "CustomerHome", new { id = group.Key });

    <h2 class="category-title">
        <a href="@categoryLink">@categoryName</a>
    </h2>

    <div class="body">
        @foreach (var product in group.Value)
        {
            var price = product.ProductDetails.FirstOrDefault()?.Price ?? 0;
            var imagePath = Url.Content(product.ProImage ?? "/images/no-image.jpg");
            <div class="in">
                <a href="@Url.Action("ChiTietSP", "CustomerHome", new { id = product.ProID })">
                    <img src="@imagePath" alt="@product.ProName" />
                    <p class="body-text">@product.ProName</p>
                    <p class="price">@price.ToString("N0") VNĐ</p>
                </a>
            </div>
        }
    </div>

    <div style="text-align: center; margin-bottom: 30px;">
        <a class="view-all" href="@categoryLink">Xem tất cả</a>
    </div>
}
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AbdullahMughal04/apple-fonts/sf-pro-display.css">
</head>
<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll(".slides img");
    const totalSlides = slides.length;

    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.remove("active");
            if (i === index) slide.classList.add("active");
        });
    }

    document.querySelector(".next").addEventListener("click", () => {
        currentSlide = (currentSlide + 1) % totalSlides;
        showSlide(currentSlide);
    });

    document.querySelector(".prev").addEventListener("click", () => {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        showSlide(currentSlide);
    });

    showSlide(currentSlide);

</script>
